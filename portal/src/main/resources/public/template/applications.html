
<style id="humane-js">
    .humane,
    .humane-original {
      position: fixed;
      -moz-transition: all 0.2s ease-out;
      -webkit-transition: all 0.2s ease-out;
      -ms-transition: all 0.2s ease-out;
      -o-transition: all 0.2s ease-out;
      transition: all 0.2s ease-out;
      z-index: 100000;
      filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    }
    .humane,
    .humane-original {
      font-family: Ubuntu, Verdana, sans-serif;
      line-height: 40px;
      font-size: 25px;
      top: 25%;
      left: 25%;
      opacity: 0;
      width: 50%;
      min-height: 40px;
      padding: 10px;
      text-align: center;
      background-color: #000;
      color: #fff;
      -webkit-border-radius: 15px;
      border-radius: 15px;
    }
    .humane p,
    .humane-original p,
    .humane ul,
    .humane-original ul {
      margin: 0;
      padding: 0;
    }
    .humane ul,
    .humane-original ul {
      list-style: none;
    }
    .humane.humane-original-info,
    .humane-original.humane-original-info {
      background-color: #4bafd5;
    }
    .humane.humane-original-success,
    .humane-original.humane-original-success {
      background-color: #7DBF85;
    }
    .humane.humane-original-error,
    .humane-original.humane-original-error {
      background-color: #e13a3a;
    }
    .humane.humane-animate,
    .humane-original.humane-original-animate {
      opacity: 0.8;
    }
    .humane.humane-animate:hover,
    .humane-original.humane-original-animate:hover {
      opacity: 0.6;
    }
    .humane.humane-js-animate,
    .humane-original.humane-original-js-animate {
      opacity: 0.8;
    }
    .humane.humane-js-animate:hover,
    .humane-original.humane-original-js-animate:hover {
      opacity: 0.6;
      filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=60);
    }
	/* TODO : must be common to all pages with the new BS5 Toast */
	infotip.info {
		padding: 20px;
		bottom: 10px !important;
		right: 10px !important;
		border-radius: 0;
		width: 450px !important;
		box-shadow: 0 0.5rem 1rem rgb(33 37 41 / 15%);
	}
	infotip.info {
		background: linear-gradient(to right, #f0f9fc, #dceff7);
	}
	infotip .close {
		cursor: pointer;
		position: absolute;
		right: 10px;
		top: 10px;
		box-sizing: content-box;
		width: 1em;
		height: 1em;
		padding: .25em .25em;
		color: #000;
		background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e") center/1em auto no-repeat;
		border: 0;
		border-radius: 6px;
		opacity: .5
	}
	infotip.info p {
		margin-top: 20px;
		color: var(--bs-third);
	}
	infotip .right-magnet {
		padding-top: 1.5rem;
		margin-top: 1.5rem;
		text-align: right;
	}
	infotip button {
		padding: 0.475rem 1.2rem;
		border: 0;
		border-radius: 0;
	}
	infotip button.cancel {
		margin-right: 1rem;
		color: #000;
		background-color: #e9ecef;
		border-color: #e9ecef;
	}
	infotip button.cancel:hover {
		color: var(--bs-primary);
		background-color: #e9ecef;
		border-color: #e9ecef;
	}
	infotip button:not(.cancel) {
		color: #fff;
		background-color: var(--bs-primary);
		border-color: var(--bs-primary);
	}
	infotip button:not(.cancel):hover {
		color: #fff;
		background-color: #d97100;
		border-color: #cc6a00;
	}
</style>
<section ng-controller="ApplicationController">
	<div class="d-flex justify-content-between row">
		<h1 class="application-title d-mobile-none col-lg-6">
			<i18n>portal.header.navigation.myapps</i18n>
		</h1>

		<!-- Search bar -->
		<section class="applications-search col-lg-4">
			<label class="sr-only" for="app-search"><i18n>apps.search</i18n></label>
			<div class="input-searchbar">
				<i class="ic-search form-control-feedback"></i>
				<input id="app-search" role="search" type="search" ng-model="display.searchText" class="form-control ng-pristine ng-untouched ng-valid ng-empty" i18n-placeholder="apps.search" autofocus="">
			</div>
		</section>
	</div>

	<!-- Bookmarks section -->
	<section class="applications-favorite">
				
		<!-- "Empty screen" -->
		<div class="text-center m-2" ng-if="!display.searchText && !bookmarks.length">
			<p class="lead m-1">
				<i18n>apps.bookmarks.empty</i18n>
			</p>
			<button 
				class="btn btn-outline-primary btn-md"
				ng-class="{'active': display.modeBookmarkEdition}"
				ng-click="toggleBookmarkEdition()"
			>
				[[lang.translate(display.modeBookmarkEditionButtonLabel)]]
			</button>
		</div>
		
		<!-- bookmarks list -->
		<section class="applications-list" id="bookmarked-apps">
			<article
				ng-repeat="application in filteredBookmarks = (bookmarks | filter:searchDisplayName)"
				id="[[application.name]]"
				class="position-relative"
			>
				<!-- links for applications (not connector) -->
				<a
					ng-if="!application.isExternal"
					ng-href="[[application.address]]"  
					target="[[application.target]]"
					class="applications-item"
					ng-class="{'no-hover': display.modeBookmarkEdition, 'pe-none': display.modeBookmarkEdition}"
				>
					<i ng-if="isIconUrl(application)" class="application">
						<img
							skin-src="[[application.icon]]"
							alt="[[application.name]]"
							ng-class="{'opacity-50': display.modeBookmarkEdition}"
						/>
					</i>
					<i 
						ng-if="!isIconUrl(application)" 
						class="application" ng-class="getIconClass(application)"
						ng-class="{'opacity-50': display.modeBookmarkEdition}"
					>
					</i>
					<span class="text-truncate text-truncate--2">[[translatedDisplayName(application)]]</span>
				</a>
				
				<!-- links for connectors -->
				<a
					ng-if="application.isExternal"
					connector-lightbox-trigger="application"
					href="#"  
					class="applications-item"
					ng-class="{'no-hover': display.modeBookmarkEdition, 'pe-none': display.modeBookmarkEdition}"
				>
					<i ng-if="isIconUrl(application)" class="application">
						<img
							skin-src="[[application.icon]]"
							alt="[[application.name]]"
							ng-class="{'opacity-50': display.modeBookmarkEdition}"
						/>
					</i>
					<i 
						ng-if="!isIconUrl(application)"
						class="application" ng-class="getIconClass(application)"
						ng-class="{'opacity-50': display.modeBookmarkEdition}"
					>
					</i>
					<span class="text-truncate text-truncate--2">[[translatedDisplayName(application)]]</span>
				</a>
				
				<button 
					class="applications-item remove"
					title="Retirer des favoris"
					ng-if="display.modeBookmarkEdition"
					ng-click="removeBookmark(application, $index, $event)"
				>
					<i class="fas fa-minus"></i>
				</button>
			</article>
			
			<div class="text-center" ng-if="display.searchText && !filteredBookmarks.length">
				<p class="text-center m-3 font-italic">
					<i18n>apps.search.bookmark.empty</i18n>
				</p>
			</div>
		</section>
		<div class="d-flex justify-content-end">
			<button 
				class="btn btn-outline-primary btn-md"
				ng-class="{'active': display.modeBookmarkEdition}"
				ng-click="toggleBookmarkEdition()"
				ng-if="!display.searchText && bookmarks.length"
			>
				[[lang.translate(display.modeBookmarkEditionButtonLabel)]]
			</button>
		</div>
	</section>

	<!-- Applications section (may contain connectors if number of connectors is below 6 or the plaftorm configured number) -->
	<section class="applications-list mt-2" id="apps">
		<article
			ng-repeat="application in filteredApplications = (applications | filter:searchDisplayName)"
			id="[[application.name]]"
			class="position-relative"
		>
			<!-- links for applications (not connector) -->
			<a
				ng-if="!application.isExternal"
				ng-href="[[application.address]]"
				target="[[application.target]]"
				class="applications-item"
				ng-class="{'no-hover': display.modeBookmarkEdition, 'pe-none': display.modeBookmarkEdition}"
			>
			<i ng-if="isIconUrl(application)" class="application">
				<img
					skin-src="[[application.icon]]"
					alt="[[application.name]]"
					ng-class="{'opacity-50': display.modeBookmarkEdition}"
				/>
			</i>
				<i 
					ng-if="!isIconUrl(application)" 
					class="application" ng-class="getIconClass(application)"
					ng-class="{'opacity-50': display.modeBookmarkEdition}"
				>
				</i>
				<span class="text-truncate text-truncate--2">[[translatedDisplayName(application)]]</span>
			</a>
			
			<!-- links for connectors -->
			<a
				ng-if="application.isExternal"
				connector-lightbox-trigger="application"
				href="#"
				class="applications-item"
				ng-class="{'no-hover': display.modeBookmarkEdition, 'pe-none': display.modeBookmarkEdition}"
			>
				<i ng-if="isIconUrl(application)" class="application">
					<img
						skin-src="[[application.icon]]"
						alt="[[application.name]]"
						ng-class="{'opacity-50': display.modeBookmarkEdition}"
					/>
				</i>
				<i 
					ng-if="!isIconUrl(application)" 
					class="application" ng-class="getIconClass(application)"
					ng-class="{'opacity-50': display.modeBookmarkEdition}"
				>
				</i>
				<span class="text-truncate text-truncate--2">[[translatedDisplayName(application)]]</span>
			</a>
			
			<button 
				class="applications-item add"
				title="Ajouter aux favoris"
				ng-if="display.modeBookmarkEdition"
				ng-click="addBookmark(application, $index, $event)"
			>
				<i class="fas fa-plus"></i>
			</button>
		</article>
		
		<div class="text-center" ng-if="display.searchText && !filteredApplications.length">
			<p class="text-center m-3 font-italic">
				<i18n>apps.search.app.empty</i18n>
			</p>
		</div>
	</section>

	<!-- Connectors section -->
	<section class="applications__connector" ng-if="display.showConnectorSection && connectors && connectors.length > 0">
		<h2><span><i18n>apps.connectors</i18n></span></h2>
		<section class="applications__list" id="connectors">
			<article
				ng-repeat="connector in filteredConnectors = (connectors | filter:searchDisplayName)"
				id="[[connector.name]]" 
				class="position-relative"
			>
				<a 
					href="#"
					connector-lightbox-trigger="connector"
					class="applications-item connector"
					ng-class="{'no-hover': display.modeBookmarkEdition, 'pe-none': display.modeBookmarkEdition}"
				>
					<i ng-if="isIconUrl(connector)" class="application">
						<img 
							skin-src="[[connector.icon]]"
							alt="[[connector.name]]"
							ng-class="{'opacity-50': display.modeBookmarkEdition}"
						/>
					</i>
					<i 
						ng-if="!isIconUrl(connector)" 
						class="application [[connector.icon]]"
						ng-class="{'opacity-50': display.modeBookmarkEdition}"
					>
					</i>
					<span class="text-truncate text-truncate--2">[[translatedDisplayName(connector)]]</span>
				</a>
				<button 
					class="applications-item add"
					title="Ajouter aux favoris"
					ng-if="display.modeBookmarkEdition"
					ng-click="addBookmark(connector, $index, $event)"
				>
					<i class="fas fa-plus"></i>
				</button>
			</article>

			<div class="text-center" ng-if="display.searchText && !filteredConnectors.length">
				<p class="text-center m-3 font-italic">
					<i18n>apps.search.connector.empty</i18n>
				</p>
			</div>
		</section>
	</section>

	<connector-lightbox></connector-lightbox>
</section>