<!DOCTYPE html>
<html>
<head>
    <title>{{#i18n}}conversation.title{{/i18n}}</title>
    <meta charset="utf-8" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" integrity="sha512-7fNh7OUGa7bdpmSQ81iNxgBywspNTxVxBxfbT1gSnQ124VGfksj3AR/QGhdYaO8ZLHBLSoaa+VsVDgw795eBaw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha512-DUC8yqWf7ez3JD1jszxCWSVB0DMP78eOyBpMa5aJki1bIRARykviOuImIczkxlj1KhVSyS16w2FSQetkD4UU2w==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.20/angular.min.js" integrity="sha512-aqezuLfILQDgqwoABeA4HLWkA9j14XWQSWwNAF7KlxXZuZKy2sSughYfFIaVZMlJ+KV2Le4caMCeeVXjHl5k3Q==" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/angular-route@1.3.20/angular-route.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.3.20/angular-sanitize.min.js" integrity="sha512-FU9Q0X/zftBohavyJlzjHSDew7ByAl9gxwKNC6ImCzxafxoW4DqGRKZOBfEn7ZoI7bp9pEicEOco2Lpfj4SKVw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment-with-locales.min.js" integrity="sha512-NOqkPURPEeHGvb+6NAzb8hfxqUh9XvuaCDP+FevWSPM5a9yD8eLTVCwDzHh0G+mDRXH044rGtMKxyaDncAW4cw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/5.4.2/Rx.min.js" integrity="sha512-+4jqoc1cq14bTiukpkTANsk/4wLv8XyG6XRHtVuKhbKVZUQKT+ssWeT6qt+Yh05pnrzy1kqTfR0u1dSLhj3onA==" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/conversation/public/dist/entcore/ng-app.js" id="context"></script>
    <script type="text/javascript" src="/conversation/public/dist/application.js"></script>
    <style> header {display : none}</style>
</head>
<body ng-controller="PrintController" class="conversation">
    <portal>
        <div class="twelve cell line">
            <div class="row">
                            <span class="cell right-magnet">
                                [[mail.sentDate()]]
                            </span>
                <a class="cell"><strong class="small-header">[[mail.sender().displayName]]</strong></a>
                <strong class="small-header cell">[[mail.fromName]]</strong>
            </div>
            <div class="row">
                <strong class="medium-text">[[mail.subject]]</strong>
            </div>
            <div class="row">
                <em class="medium-importance medium-text">
                    <span translate key="to"></span>
                    <span ng-repeat="receiver in receivers = (mail.to | filter: filterUsers(mail))">
                                    <a ng-if="!users.list.isGroup(mail.map(receiver).id)" href="/userbook/annuaire#[[mail.map(receiver).id]]">[[receiver.displayName]]</a>
                                    <span ng-if="users.list.isGroup(mail.map(receiver).id)">[[mail.map(receiver).displayName]]</span>
                                    <span ng-if="$index !== receivers.length - 1 && receiver.displayName">,</span>
                                </span>
                    <span ng-repeat="receiverName in mail.toName">
                                    [[receiverName]]<span ng-if="$index !== mail.toName.length - 1">,</span>
                                </span>
                </em>
            </div>
            <div class="row">
                <em class="medium-importance medium-text" ng-if="(mail.cc.length + mail.ccName.length) > 0">
                    <span translate key="cc"></span>
                    <span ng-repeat="receiver in receivers = (mail.cc | filter: filterUsers(mail))">
                                    <a ng-if="!users.list.isGroup(mail.map(receiver).id)" href="/userbook/annuaire#[[mail.map(receiver).id]]">[[receiver.displayName]]</a><span ng-if="users.list.isGroup(mail.map(receiver).id)">[[mail.map(receiver).displayName]]</span><span ng-if="$index !== receivers.length - 1 && receiver.displayName">,</span>
                                </span>
                    <span ng-repeat="receiverName in mail.ccName">
                                    [[receiverName]]<span ng-if="$index !== mail.ccName.length - 1">,</span>
                                </span>
                </em>
            </div>
            <div class="row">
                <em class="medium-importance medium-text" ng-if="(mail.cci.length + mail.cciName.length) > 0">
                    <span translate key="cci"></span>
                    <span ng-repeat="receiver in receivers = (mail.cci | filter: filterUsers(mail))">
                                    <a ng-if="!users.list.isGroup(mail.map(receiver).id)" href="/userbook/annuaire#[[mail.map(receiver).id]]">[[receiver.displayName]]</a><span ng-if="users.list.isGroup(mail.map(receiver).id)">[[mail.map(receiver).displayName]]</span><span ng-if="$index !== receivers.length - 1 && receiver.displayName">,</span>
                                </span>
                    <span ng-repeat="receiverName in mail.cciName">
                                    [[receiverName]]<span ng-if="$index !== mail.cciName.length - 1">,</span>
                                </span>
                </em>
            </div>
            <div class="row">
                <hr />
            </div>
            <div class="row">
                <div class="twelve cell escape_cke" bind-html="mail.body"></div>
            </div>
            <div class="row">
                <hr />
            </div>
        </div>
    </portal>
</body>
</html>

